from openai import OpenAI
import base64
import os

# âœ… Step 1: Initialize client
client = OpenAI()  # assumes OPENAI_API_KEY is set

# âœ… Step 2: Local image path
image_path = r"C:\Users\<YOUR_USERNAME>\Desktop\test_pic.jpg"  # ðŸ‘ˆ change this

# âœ… Step 3: Convert image to data URL
ext = os.path.splitext(image_path)[1].lower()
mime = "image/png" if ext == ".png" else "image/jpeg"

with open(image_path, "rb") as f:
    b64 = base64.b64encode(f.read()).decode("utf-8")

data_url = f"data:{mime};base64,{b64}"

# âœ… Step 4: Prepare message
messages = [
    {
        "role": "user",
        "content": [
            {"type": "text", "text": "Describe what you see in this image briefly."},
            {"type": "image_url", "image_url": {"url": data_url}}
        ]
    }
]

# âœ… Step 5: Call GPT-4o
response = client.chat.completions.create(
    model="gpt-4o-mini",  # or "gpt-4o"
    messages=messages,
    temperature=0
)

print("âœ… Response:", response.choices[0].message.content)